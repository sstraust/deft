["^ ","~:output",["^ ","~:js","","~:ns","~$cljs.user","~:resource-id",["~:shadow.build.classpath/resource","deft/core_cljs.cljc"],"~:compiled-at",1762963258188,"~:reader-aliases",null,"~:resource-name","deft/core_cljs.cljc","~:warnings",[],"~:source",";; (ns deft.core-cljs\n;;   (:require [malli.core :as m]\n;;             #?(:clj [potemkin.collections :refer [def-map-type]])))\n\n;; #?(:clj\n;;    (def-map-type TypeMap [m mta]\n;;   (get [_ k default-value]\n;;        (if (contains? m k)\n;;          (get m k)\n;;          default-value))\n;;   (assoc [_ k v]\n;;     (TypeMap. (assoc m k v) mta))\n;;   (dissoc [_ k]\n;;           (if (contains? (:required-keys mta) k)\n;;             (dissoc m k)\n;;             (TypeMap. (dissoc m k) mta)))\n;;   (keys [_]\n;;     (keys m))\n;;   (meta [_]\n;;     mta)\n;;   (with-meta [_ mta]\n;;     (TypeMap. m mta)))\n   \n;;    :cljs\n;;    ;; ClojureScript implementation using deftype\n;;    (deftype TypeMap [m mta]\n;;      ILookup\n;;      (-lookup [_ k]\n;;        (get m k))\n;;      (-lookup [_ k default-value]\n;;        (get m k default-value))\n     \n;;      IAssociative\n;;      (-assoc [_ k v]\n;;        (TypeMap. (assoc m k v) mta))\n;;      (-contains-key? [_ k]\n;;        (contains? m k))\n     \n;;      IMap\n;;      (-dissoc [_ k]\n;;        (if (contains? (:required-keys mta) k)\n;;          (dissoc m k)\n;;          (TypeMap. (dissoc m k) mta)))\n     \n;;      ICollection\n;;      (-conj [_ entry]\n;;        (if (vector? entry)\n;;          (TypeMap. (assoc m (nth entry 0) (nth entry 1)) mta)\n;;          (reduce -conj (TypeMap. m mta) entry)))\n     \n;;      ISeqable\n;;      (-seq [_]\n;;        (seq m))\n     \n;;      ICounted\n;;      (-count [_]\n;;        (count m))\n     \n;;      IEmptyableCollection\n;;      (-empty [_]\n;;        (TypeMap. {} mta))\n     \n;;      ;; Metadata support\n;;      IMeta\n;;      (-meta [_]\n;;        mta)\n     \n;;      IWithMeta\n;;      (-with-meta [_ new-mta]\n;;        (TypeMap. m new-mta))\n     \n;;      ;; Equality\n;;      IEquiv\n;;      (-equiv [this other]\n;;        (and (instance? TypeMap other)\n;;             (let [^TypeMap o other] \n;;               (and (= m (.-m o))\n;;                    (= mta (.-mta o))))))\n     \n;;      IHash\n;;      (-hash [_]\n;;        (hash [m mta]))\n     \n;;      ;; Make it work with pr-str\n;;      IPrintWithWriter\n;;      (-pr-writer [_ writer opts]\n;;        (-write writer \"#deft.core.TypeMap\")\n;;        (-write writer (pr-str {:m m :mta mta})))\n     \n;;      ;; IFn for map-as-function behavior: (my-map :key)\n;;      IFn\n;;      (-invoke [this k]\n;;        (-lookup this k))\n;;      (-invoke [this k not-found]\n;;        (-lookup this k not-found))))\n\n\n;; (defn check-implements\n;;   \"Verify that a type T implements a protocol (as defined with defp).\n\n;;   A protocol is considered satisfied if, for every method in the protocol,\n;;   there exists a multimethod implementation with dispatch value T\n\n;;   [obj-type protocol & {:keys [available-methods]}]\n;;   obj-type: should be the _dispatch value_ that is used for multimethods.\n;;     for objects defined via deft, this is the _keyword_, so (deft Shape ...)\n;;     would result in ::Shape\n;;   protocol: the protocol to implement. If you define it with (defp Drawable ...)\n;;     it's the variable stored in Drawable\n;;   available-methods: a list of methods to restrict to. it's like saying, check\n;;     if this protocol is satisfied, but assume that we can only see the value of\n;;     these methods. It's useful for checking that all of the methods are defined in the same place\n;;     (and not sporadically). If its nil, then it does no extra filtering.\n;;   \"\n;;   [obj-type protocol & {:keys [available-methods]}]\n;;   (let [available-methods (when available-methods (set available-methods))\n;;         undefined-methods\n;;         (into []\n;;         (remove nil?\n;;                 (map (fn [{::keys [key-fn multimethod] :as method-def}]\n;;                             (when (or (not (contains?\n;;                                         (methods multimethod)\n;;                                         (key-fn obj-type)))\n;;                                       (and available-methods\n;;                                            (not (contains? available-methods multimethod))))\n;;                               method-def))\n;;                      (::implements-methods protocol))))]\n;;     (if (not (empty? undefined-methods))\n;;       (throw (RuntimeException. (str \"methods \" undefined-methods \" is not defined for \" obj-type \" in protocol \" protocol)))\n;;       true)))\n\n\n;; (defn prefix-keys [ns-name m]\n;;   (let [prefix-fn (fn [k]\n;;                    (if (keyword? k)\n;;                      (keyword (name ns-name) (name k))\n;;                      k))]\n;;     (reduce-kv (fn [acc k v]\n;;                  (assoc acc (prefix-fn k) v))\n;;                {}\n;;                m)))\n","~:reader-features",["~#set",["~:cljs"]],"~:used-var-namespaces",["^<",[]],"~:cljc",true,"~:source-map-compact",["^ ","mappings","","names",[]],"~:used-vars",["^<",[]]],"~:cache-keys",["~#cmap",[["^5","goog/dom/tagname.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","~:shadow.build.compiler/resolve",["^ ","~:require-id",null,"~:deps-ids",["^<",[]],"~:deps-syms",["~$goog","~$goog.dom.HtmlElement"]]],["^5","goog/html/trustedtypes.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/labs/useragent/browser.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","~$goog.labs.userAgent.util","~$goog.labs.userAgent.highEntropy.highEntropyValue","~$goog.asserts","~$goog.string.internal","~$goog.labs.userAgent.highEntropy.highEntropyData","~$goog.labs.userAgent"]]],["^5","goog/html/safeurl.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^N","~$goog.fs.url","~$goog.html.TrustedResourceUrl","~$goog.string.Const","~$goog.string.TypedString","^O"]]],["^5","goog/array/array.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^N"]]],["^5","goog/debug/error.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/flags/flags.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/dom/nodetype.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/labs/useragent/highentropy/highentropyvalue.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^L","^O"]]],["^5","goog/string/typedstring.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/object/object.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/dom/asserts.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^N"]]],"~:SHADOW-TIMESTAMP",[1714511282000,1714511282000,1675993901000],["^5","goog/math/long.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^N","~$goog.reflect"]]],["^5","goog/html/trustedresourceurl.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^N","~$goog.fs.blob","^R","~$goog.html.SafeScript","~$goog.html.trustedtypes","^T","^U"]]],["^5","goog/string/internal.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/functions/functions.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/html/safestyle.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^T","~$goog.html.SafeUrl","^U","^N","^O"]]],["^5","goog/dom/safe.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^N","~$goog.asserts.dom","~$goog.dom.asserts","~$goog.functions","~$goog.html.SafeHtml","^Y","~$goog.html.SafeStyle","^[","^S","~$goog.html.uncheckedconversions","^T","^O"]]],["^5","goog/asserts/dom.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","~$goog.dom.TagName","^N","~$goog.dom.element"]]],["^5","goog/html/safehtml.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^T","^Y","^14","~$goog.html.SafeStyleSheet","^[","^16","^S","^U","^N","~$goog.labs.userAgent.browser","~$goog.array","~$goog.object","^O","~$goog.dom.tags","^Z"]]],["^5","goog/dom/tags.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^1;"]]],["^5","goog/fs/blob.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/asserts/asserts.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","~$goog.debug.Error","~$goog.dom.NodeType"]]],["^5","goog/uri/uri.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^1:","^N","~$goog.collections.maps","~$goog.string","~$goog.structs","~$goog.uri.utils","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"]]],["^5","goog/labs/useragent/highentropy/highentropydata.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^M"]]],["^5","goog/collections/maps.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/fs/url.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/base.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",[]]],["^5","goog/structs/structs.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^1:","^1;"]]],["^5","goog/string/string.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","~$goog.dom.safe","^15","^T","^O"]]],["^5","goog/reflect/reflect.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/labs/useragent/util.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^O","^Q"]]],["^5","goog/string/stringbuffer.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","goog/labs/useragent/useragent.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","~$goog.flags"]]],["^5","goog/dom/element.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^1>","^16"]]],["^5","goog/html/uncheckedconversions.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^N","^13","^Y","^14","^18","^[","^S","^T","^O"]]],["^5","goog/dom/htmlelement.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J"]]],["^5","cljs/core.cljs"],["81c8fd45d40669c6a173bd1066b9cd90fa8b1a1b","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","~$goog.math.Long","~$goog.math.Integer","^1@","^1;","^1:","~$goog.Uri","~$goog.string.StringBuffer"]]],["^5","goog/html/safescript.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^T","^U","^Z","^N"]]],["^5","goog/html/safestylesheet.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^T","^14","^U","^1;","^N","^O"]]],["^5","deft/core_cljs.cljc"],["8b61ef069462d56ac6ca40183510b9f1b89bfbee","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","~$cljs.core"]]],["^5","goog/math/integer.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^W"]]],["^5","goog/uri/utils.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^N","^1@"]]],["^5","goog/string/const.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^F",["^ ","^G",null,"^H",["^<",[]],"^I",["^J","^N","^U"]]]]],"~:clj-info",["^ "],"~:analyzer",null,"^2","~$deft.core-cljs","~:ns-specs",["^ "],"~:ns-spec-vars",["^<",[]],"~:compiler-options",["^E",[["^1Q","~:static-fns"],true,["~:js-options","~:use-babel"],null,["^1Q","~:shadow-tweaks"],null,["^1Q","~:source-map-inline"],null,["^1Q","~:shadow-optimize-constants"],null,["^1Q","~:elide-asserts"],false,["^1Q","~:optimize-constants"],null,["^1Q","^9"],null,["^1Q","~:external-config"],null,["^1Q","~:tooling-config"],null,["^1Q","~:emit-constants"],null,["^1Q","~:load-tests"],null,["^1Q","~:form-size-threshold"],null,["^1Q","~:global-goog-object&array"],null,["^1Q","~:data-readers"],null,["^1Q","~:infer-externs"],"~:auto",["^1Q","^;"],null,["^1S","~:js-provider"],"~:shadow",["~:mode"],"~:dev",["^1Q","~:fn-invoke-direct"],null,["^1Q","~:source-map"],"/dev/null"]]]